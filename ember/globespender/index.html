<!doctype html>
<html>
<head>
	<meta charset="utf-8">
	<title>Ember.js â€¢ Globe Spender</title>
	<link rel="stylesheet" href="style.css">
	
	<script type="text/javascript"
    src="http://maps.googleapis.com/maps/api/js?sensor=false">
  </script>
</head>
<body>
	<script type="text/x-handlebars" data-template-name="expenses">
		<section id="expenseapp">
			<header id="header">
				<h1>Globe Spender</h1>
				<button {{action 'createExpense'}}>Create</button
			</header>
			
			<section id="main">
				<table id="expense-list">
					<tr>
						<th>Date</th>
						<th>CCY</th>
						<th>Amount</th>
						<th>Category</th>
						<th>Place</th>
						<th>Destination</th>
						<th>Note</th>
						<th>FX Rate to USD</th>
						<th>Actions</th>
					</tr>
					{{#each controller itemController="expense"}}
					<tr>
							{{#if is_editing }}
								<td>{{view Ember.TextField valueBinding='date'}}</td>
								<td>{{view Ember.TextField valueBinding='ccy'}}</td>
								<td>{{view Ember.TextField valueBinding='amount'}}</td>
								<td>{{view Ember.TextField valueBinding='category'}}</td>
								<td>{{view Ember.TextField valueBinding='place'}}</td>
								<td>{{view Ember.TextField valueBinding='destination'}}</td>
								<td>{{view Ember.TextField valueBinding='note'}}</td>
								<td>{{view Ember.TextField valueBinding='fxrate'}}</td>
								<td>
									<button {{action 'doneEditing'}}>Done</button>
									<button {{action 'removeExpense'}}>Destroy</button>
								</td>
				    	{{else}}
								<td>{{dateString}}</td>
								<td>{{ccy}}</td>
								<td>${{amount}}</td>
								<td>{{category}}</td>
								<td>{{place}}</td>
								<td>{{destinate}}</td>
								<td>{{note}}</td>
								<td>{{fxrate}}</td>
								<td>
									<button {{action 'edit'}}>Edit</button>
								</td>
				    	{{/if}}
					</tr>
					{{/each}}
				</table>
			
			</section>

			<footer id="stats-category">
				<h2>Monthly Expenses by Category (USD)</h2>	
				<table>
					<tr>
						<th>Category</th>
						<th>Monthly average</th>
					</tr>
					{{#each category in categoryStats.categories_list}}
					<tr>
						<td align="center">{{category.name}}</td>
						<td align="center">${{category.monthly_average}}</td>
					</tr>
					{{/each}}
				</table>
			</footer>
			
			<footer id="location-category">
				<h2>Daily Expenses by City (USD)</h2>
				<table>
					<tr>
						<th>Location</th>
						<th># of Days</th>
						<th>Average Daily Spending</th>
					</tr>
					{{#each place in placeStats}}
					<tr>
						<td align="center">{{place.place}}</td>
						<td align="center">{{place.number_of_days}}</td>
						<td align="center">${{place.average}}</td>
					</tr>
					{{/each}}
				</table>
				<p>Total days tracked: {{categoryStats.total_number_of_days}}</p>
			</footer>
		</section>
	</script>

	<footer id="info">
	</footer>
	<footer id="map-footer">
		<div id="map_canvas" style="width:300; height:400px"></div>
	</footer>

	<script src="js/libs/jquery.min.js"></script>
	<script src="js/libs/handlebars.js"></script>
	<script src="js/libs/ember.js"></script>
	<script src="js/libs/ember-data.js"></script>
	<script src="js/libs/local_storage_adapter.js"></script>

	<script src="js/application.js"></script>
	<script src="js/router.js"></script>

	<script src="js/models/store.js"></script>
	<script src="js/models/expense.js"></script>
	<script src="js/controllers/expense_controller.js"></script>
	<script src="js/controllers/expenses_controller.js"></script>
	<script src="js/controllers/map_controller.js"></script>
	<!-- script src="js/views/edit_todo_view.js"></script -->
	
</body>
</html>